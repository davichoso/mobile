angular.module("app.controllers",[]).controller("cameraCtrl",function(e,t,a,o,n,i){t.step=2,localStorage.step=2,e.takePicture=function(){t.loading=!0,document.addEventListener("deviceready",function(){var e={quality:90,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,saveToPhotoAlbum:!1,correctOrientation:!0,targetWidth:1200};a.getPicture(e).then(function(e){t.image="data:image/jpeg;base64,"+e,localStorage.image=t.image,localStorage.step=3,t.step=3,n.path("/filters")},function(e){t.loading=!1})},!1)},e.dodat=function(e){var a=i.defer();return e?window.plugins.Base64.encodeFile(e[0],function(e){a.resolve(e)}):(t.loading=!1,a.reject("NaN")),a.promise},e.takePicturefromlibrary=function(){t.loading=!0;var a={maximumImagesCount:1,width:640,quality:90};o.getPictures(a).then(function(a){e.promise=e.dodat(a),e.promise.then(function(e){t.image=e,localStorage.image=t.image,localStorage.step=3,t.step=3,n.path("/filters")},function(e){console.log("error")})},function(e){t.loading=!1})}}).controller("filtersCtrl",function(e,t,a){t.loading=!1,t.imagecopy=t.image,t.step=3,localStorage.step=3,t.image||a.path("/camera"),e.selhand="no",e.changehand=function(a){e.selhand=a;var o=new Image,n=new Image;n.src=t.image,o.src="img/"+a+".png";var i=document.createElement("canvas");i.width=n.width,i.height=n.height;var r=i.getContext("2d");r.drawImage(n,0,0);var c=.6*i.width,l=c*(o.height/o.width),g=i.height-l;derecha=0,a.endsWith("r",3)&&(derecha=i.width-c),r.drawImage(o,0,0,o.width,o.height,derecha,g,c,l),t.imagecopy=i.toDataURL("image/jpeg",.8)}}).controller("sendCtrl",function(e,t){t.image||$location.path("/camera")}).controller("homeCtrl",function(e,t){}).controller("shareCtrl",function(e,t){t.image||$location.path("/camera")});